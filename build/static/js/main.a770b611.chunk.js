(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(14),r=n.n(a),o=n(3),s=n.n(o);const i="/api/persons";var l=n(0);var d=e=>{let{notifMessage:t,errorMessage:n}=e;return null===t&&null===n?null:Object(l.jsxs)(l.Fragment,{children:[t&&Object(l.jsx)("div",{className:"notif",children:t}),n&&Object(l.jsx)("div",{className:"error",children:n})]})};const j=e=>{let{setFilter:t}=e;return Object(l.jsxs)("div",{children:["filter shown with ",Object(l.jsx)("input",{onChange:e=>t(e.target.value)})]})},u=e=>Object(l.jsxs)("form",{onSubmit:e.addPerson,children:[Object(l.jsxs)("div",{children:["name: ",Object(l.jsx)("input",{onChange:t=>e.setNewName(t.target.value)})]}),Object(l.jsxs)("div",{children:["number: ",Object(l.jsx)("input",{onChange:t=>e.setNewNumber(t.target.value)})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]}),b=e=>{let{personsToShow:t,onDeletePerson:n}=e;return Object(l.jsx)("div",{children:t().map((e=>Object(l.jsx)(h,{person:e,onDelete:n},e.name)))})},h=e=>{let{person:t,onDelete:n}=e;return Object(l.jsxs)("p",{children:[t.name," ",t.number," ",Object(l.jsx)("button",{onClick:()=>n(t.id),children:"delete"})]})};var m=()=>{const[e,t]=Object(c.useState)([]),[n,a]=Object(c.useState)(""),[r,o]=Object(c.useState)(""),[h,m]=Object(c.useState)(""),[O,f]=Object(c.useState)(null),[p,x]=Object(c.useState)(null),v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;f(e),setTimeout((()=>{f(null)}),t)},w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;x(e),setTimeout((()=>{x(null)}),t)};Object(c.useEffect)((()=>{s.a.get(i).then((e=>e.data)).then((e=>{t(e)}))}),[]);return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(d,{notifMessage:O,errorMessage:p}),Object(l.jsx)(j,{setFilter:m}),Object(l.jsx)("h2",{children:"add a new"}),Object(l.jsx)(u,{addPerson:c=>{c.preventDefault();const a=e.find((e=>e.name===n));var o;a?window.confirm("".concat(n," is already added to phonebook, replace the old number with a new one?"))&&((e,t)=>s.a.put("".concat(i,"/").concat(e),t).then((e=>e.data)))(a.id,{name:n,number:r}).then((n=>{t([...e.filter((e=>e.id!==a.id)),n]),v("Updated the number of ".concat(n.name," to ").concat(n.number))})).catch((()=>{w("Information of ".concat(n," has already been removed from server")),t(e.filter((e=>e.id!==a.id)))})):(o={name:n,number:r},s.a.post(i,o).then((e=>e.data))).then((n=>{t(e.concat(n)),v("Added ".concat(n.name))}))},setNewName:a,setNewNumber:o}),Object(l.jsx)("h2",{children:"Numbers"}),Object(l.jsx)(b,{personsToShow:()=>""===h?e:e.filter((e=>e.name.toLowerCase().includes(h.toLowerCase()))),onDeletePerson:n=>{const c=e.find((e=>e.id===n));window.confirm("Delete ".concat(c.name," ?"))&&(e=>s.a.delete("".concat(i,"/").concat(e)).then((e=>e.data)))(c.id).then((()=>{t(e.filter((e=>e.id!==n))),v("Deleted ".concat(c.name))})).catch((()=>{w("Information of ".concat(c.name," has already been removed from server")),t(e.filter((e=>e.id!==n)))}))}})]})};n(39);r.a.render(Object(l.jsx)(m,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.a770b611.chunk.js.map